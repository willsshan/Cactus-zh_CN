---
title: 两台服务器NTP时间对齐
description: 有两台服务器，一台有可以连接外网，其余都是内网机。如何让那个其他服务器的时间对齐这台有外网的服务器呢？
publishDate: 2025-08-12T15:07
---
> 有两台服务器，一台有可以连接外网，其余都是内网机。如何让那个其他服务器的时间对齐这台有外网的服务器呢？

## 前置要求

* 一个可以连接外网的机器
* 内网机器已经安装了ntp服务

## 配置

### 外网服务器的操作

首先在有外网的服务器上安装ntp：

```sh
sudo yum install ntp
```

安装完成后开启ntp：

```sh
systemctl start ntpd
```

看看123端口有没有在监听：

```sh
netstat -anp | grep 123
```

![image-20250812144120562](https://image.lino.chat/blog/202508121441774.png)

### 内网服务器的操作

vim /etc/ntp.conf

原有：

```sh
server 0.centos.pool.ntp.org iburst
server 1.centos.pool.ntp.org iburst
server 2.centos.pool.ntp.org iburst
server 3.centos.pool.ntp.org iburst
```

修改为:

```sh
server 外网IP服务器的内网IP iburst
```

重启一下：

```sh
sudo systemctl restart ntpd
```

执行下：

```sh
ntpq -p
```

看看是不是有另一台服务器的主机名或者IP，如果有代表成功！
